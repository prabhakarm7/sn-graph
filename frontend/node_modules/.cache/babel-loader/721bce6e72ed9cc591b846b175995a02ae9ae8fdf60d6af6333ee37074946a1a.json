{"ast":null,"code":"import React,{useState}from'react';import{Handle,Position}from'reactflow';import{Box,Typography,Divider,Chip,Stack}from'@mui/material';import{BusinessCenter,Person,CorporateFare,AccountBalance,TrendingUp,Assessment,Analytics,ShowChart,Psychology// For incumbent products\n// For incumbent products\n// For BI_RECOMMENDS edges\n}from'@mui/icons-material';import{getConsultantColorById,APP_THEME_COLORS,ENTITY_COLORS,STATUS_COLORS}from'../config/ConsultantColors';// Helper function to find the consultant this field consultant belongs to\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const findParentConsultant=fieldConsultantData=>{// Method 1: Use explicit parentConsultantId if available (PREFERRED)\nif(fieldConsultantData.parentConsultantId){console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Parent consultant ${fieldConsultantData.parentConsultantId} (explicit)`);return fieldConsultantData.parentConsultantId;}// Method 2: Extract from naming pattern (e.g., \"NAI_F1\" -> \"NAI_C1\")\nif(fieldConsultantData.id){let consultantId=fieldConsultantData.id;if(consultantId.includes('_F')){consultantId=consultantId.replace('_F','_C');}else if(consultantId.includes('FIELD_CONSULTANT')){consultantId=consultantId.replace('FIELD_CONSULTANT','CONSULTANT');}else if(consultantId.includes('FIELD')){consultantId=consultantId.replace('FIELD','CONSULTANT');}else{const parts=consultantId.split('_');if(parts.length>=2){consultantId=`${parts[0]}_C${parts[parts.length-1]}`;}}console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Parent consultant ${consultantId} (pattern matching)`);return consultantId;}// Method 3: Use PCA if available (fallback)\nif(fieldConsultantData.pca){console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Using PCA ${fieldConsultantData.pca}`);return fieldConsultantData.pca;}// Method 4: Extract from name pattern\nif(fieldConsultantData.name){const nameMatch=fieldConsultantData.name.match(/(\\w+)\\s*\\d*\\s*\\((\\w+)\\)/);if(nameMatch){var _fieldConsultantData$,_fieldConsultantData$2;const region=nameMatch[2];const number=((_fieldConsultantData$=fieldConsultantData.id)===null||_fieldConsultantData$===void 0?void 0:(_fieldConsultantData$2=_fieldConsultantData$.match(/\\d+$/))===null||_fieldConsultantData$2===void 0?void 0:_fieldConsultantData$2[0])||'1';const consultantId=`${region}_C${number}`;console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Extracted from name: ${consultantId}`);return consultantId;}}// Fallback\nconsole.log(`🔗 Field consultant ${fieldConsultantData.id} -> Using own ID as fallback`);return fieldConsultantData.id||'default';};export const ConsultantNode=/*#__PURE__*/React.memo(function ConsultantNode(_ref){let{data}=_ref;const[isHovered,setIsHovered]=useState(false);// Get color from curated palette (imported from config)\nconst colors=getConsultantColorById(data.id);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:16,background:colors.light,color:'white',borderRadius:16,minWidth:200,textAlign:'center',boxShadow:isHovered?`0 8px 32px ${colors.primary}66`:`0 4px 16px ${colors.primary}33`,transform:isHovered?'scale(1.05)':'scale(1)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',border:`2px solid ${colors.primary}`,backdropFilter:'blur(10px)'},onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false),children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center',mb:1,gap:1},children:[/*#__PURE__*/_jsx(BusinessCenter,{sx:{fontSize:'1.5rem',color:colors.primary}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:`${colors.primary}dd`,fontWeight:'bold',textTransform:'uppercase',letterSpacing:'0.5px',fontSize:'0.7rem'},children:\"Consultant\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontWeight:'bold',fontSize:'0.95rem',color:colors.primary,mb:0.5},children:data.name}),/*#__PURE__*/_jsx(Box,{sx:{mt:1,width:'100%',height:'3px',background:`linear-gradient(90deg, ${colors.primary} 0%, ${colors.secondary} 100%)`,borderRadius:'2px'}}),/*#__PURE__*/_jsx(Handle,{type:\"source\",position:Position.Bottom,style:{background:colors.primary}})]});});export const FieldConsultantNode=/*#__PURE__*/React.memo(function FieldConsultantNode(_ref2){let{data}=_ref2;const[isHovered,setIsHovered]=useState(false);// Get parent consultant's color (inherits from parent)\nconst parentConsultantId=findParentConsultant(data);const colors=getConsultantColorById(parentConsultantId);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:16,background:colors.light,color:'white',borderRadius:16,minWidth:200,textAlign:'center',boxShadow:isHovered?`0 8px 32px ${colors.primary}66`:`0 4px 16px ${colors.primary}33`,transform:isHovered?'scale(1.05)':'scale(1)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',border:`2px dashed ${colors.primary}`,// Dashed border to show it's a subordinate\nbackdropFilter:'blur(10px)'},onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false),children:[/*#__PURE__*/_jsx(Handle,{type:\"target\",position:Position.Top,style:{background:colors.primary}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center',mb:1,gap:1},children:[/*#__PURE__*/_jsx(Person,{sx:{fontSize:'1.5rem',color:colors.primary}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:`${colors.primary}dd`,fontWeight:'bold',textTransform:'uppercase',letterSpacing:'0.5px',fontSize:'0.7rem'},children:\"Field Consultant\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontWeight:'bold',fontSize:'0.95rem',color:colors.primary,mb:0.5},children:data.name}),/*#__PURE__*/_jsx(Box,{sx:{mt:1,width:'80%',height:'2px',background:`linear-gradient(90deg, ${colors.primary} 0%, ${colors.secondary} 100%)`,borderRadius:'2px',mx:'auto'}}),/*#__PURE__*/_jsx(Handle,{type:\"source\",position:Position.Bottom,style:{background:ENTITY_COLORS.company.primary}})]});});// 🏢 COMPANY NODE COMPONENT\nexport const CompanyNode=/*#__PURE__*/React.memo(function CompanyNode(_ref3){let{data}=_ref3;const[isHovered,setIsHovered]=useState(false);// Use fixed company colors (separate from consultants)\nconst colors=ENTITY_COLORS.company;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:16,background:colors.light,color:'white',borderRadius:16,minWidth:220,textAlign:'center',boxShadow:isHovered?`0 8px 32px ${colors.primary}66`:`0 4px 16px ${colors.primary}33`,transform:isHovered?'scale(1.05)':'scale(1)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',border:`2px solid ${colors.primary}`,backdropFilter:'blur(10px)'},onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false),children:[/*#__PURE__*/_jsx(Handle,{type:\"target\",position:Position.Top,style:{background:'inherit'}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center',mb:1,gap:1},children:[/*#__PURE__*/_jsx(CorporateFare,{sx:{fontSize:'1.5rem',color:colors.primary}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:`${colors.primary}dd`,fontWeight:'bold',textTransform:'uppercase',letterSpacing:'0.5px',fontSize:'0.7rem'},children:\"Company\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontWeight:'bold',fontSize:'0.95rem',color:colors.primary,mb:0.5},children:data.name}),/*#__PURE__*/_jsx(Handle,{type:\"source\",position:Position.Bottom,style:{background:ENTITY_COLORS.product.primary}})]});});// 🏦 INCUMBENT PRODUCT NODE COMPONENT (NEW)\nexport const IncumbentProductNode=/*#__PURE__*/React.memo(function IncumbentProductNode(_ref4){let{data}=_ref4;const[isHovered,setIsHovered]=useState(false);// 🎨 DISTINCT COLOR SCHEME for incumbent products\nconst colors={primary:'#f59e0b',// Amber for incumbent products\nsecondary:'#d97706',// Darker amber\nlight:'linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(217, 119, 6, 0.1) 100%)'};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:18,background:colors.light,color:'white',borderRadius:18,minWidth:280,textAlign:'center',boxShadow:isHovered?`0 12px 48px ${colors.primary}40`:`0 6px 24px ${colors.primary}20`,transform:isHovered?'scale(1.03)':'scale(1)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',border:`2px solid ${colors.primary}`,backdropFilter:'blur(20px)'},onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false),children:[/*#__PURE__*/_jsx(Handle,{type:\"target\",position:Position.Top,style:{background:ENTITY_COLORS.company.primary}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center',mb:1.5,gap:1},children:[/*#__PURE__*/_jsx(Psychology,{sx:{fontSize:'1.5rem',color:colors.primary}}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'left'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:colors.primary,fontWeight:'bold',textTransform:'uppercase',letterSpacing:'0.5px',fontSize:'0.7rem',display:'block'},children:\"Incumbent Product\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'rgba(255, 255, 255, 0.7)',fontSize:'0.65rem',display:'block'},children:\"Recommendation Engine\"})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontWeight:'bold',fontSize:'1rem',color:colors.primary,mb:1},children:data.name}),data.evestment_product_guid&&/*#__PURE__*/_jsx(Chip,{label:`GUID: ${data.evestment_product_guid.slice(0,8)}...`,size:\"small\",sx:{bgcolor:`${colors.primary}20`,color:colors.primary,fontSize:'0.65rem',fontWeight:'bold',mb:1}}),/*#__PURE__*/_jsx(Handle,{type:\"source\",position:Position.Bottom,style:{background:ENTITY_COLORS.product.primary}})]});});// 🏦 PRODUCT NODE COMPONENT (Updated)\nexport const ProductNode=/*#__PURE__*/React.memo(function ProductNode(_ref5){var _data$ratings;let{data}=_ref5;const[isHovered,setIsHovered]=useState(false);// Use fixed product colors (separate from consultants)\nconst colors=ENTITY_COLORS.product;const colorFor=rg=>rg==='Positive'?STATUS_COLORS.positive:rg==='Negative'?STATUS_COLORS.negative:rg==='Introduced'?STATUS_COLORS.neutral:rg==='Neutral'?STATUS_COLORS.neutral:STATUS_COLORS.neutral;// Determine product icon based on asset class\nconst getProductIcon=()=>{var _data$asset_class;const assetClass=(_data$asset_class=data.asset_class)===null||_data$asset_class===void 0?void 0:_data$asset_class.toLowerCase();switch(assetClass){case'equities':return/*#__PURE__*/_jsx(ShowChart,{sx:{fontSize:'1.5rem',color:colors.primary}});case'fixed income':return/*#__PURE__*/_jsx(AccountBalance,{sx:{fontSize:'1.5rem',color:colors.primary}});case'alternatives':return/*#__PURE__*/_jsx(Analytics,{sx:{fontSize:'1.5rem',color:colors.primary}});case'real estate':return/*#__PURE__*/_jsx(CorporateFare,{sx:{fontSize:'1.5rem',color:colors.primary}});default:return/*#__PURE__*/_jsx(TrendingUp,{sx:{fontSize:'1.5rem',color:colors.primary}});}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:18,background:colors.light,color:'white',borderRadius:18,minWidth:260,textAlign:'center',boxShadow:isHovered?`0 12px 48px ${colors.primary}40`:`0 6px 24px ${colors.primary}20`,transform:isHovered?'scale(1.03)':'scale(1)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',border:`2px solid ${colors.primary}`,backdropFilter:'blur(20px)'},onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false),children:[/*#__PURE__*/_jsx(Handle,{type:\"target\",position:Position.Top,style:{background:ENTITY_COLORS.company.primary}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center',mb:1.5,gap:1},children:[getProductIcon(),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'left'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:colors.primary,fontWeight:'bold',textTransform:'uppercase',letterSpacing:'0.5px',fontSize:'0.7rem',display:'block'},children:\"Product\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'rgba(255, 255, 255, 0.7)',fontSize:'0.65rem',display:'block'},children:data.asset_class||'Investment Solution'})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontWeight:'bold',fontSize:'1rem',color:colors.primary,mb:1},children:data.name}),(data.universe_name||data.universe_score)&&/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[data.universe_name&&/*#__PURE__*/_jsx(Chip,{label:data.universe_name,size:\"small\",sx:{bgcolor:`${colors.primary}20`,color:colors.primary,fontSize:'0.65rem',fontWeight:'bold',mr:0.5}}),data.universe_score&&/*#__PURE__*/_jsx(Chip,{label:`Score: ${data.universe_score}`,size:\"small\",sx:{bgcolor:`${colors.primary}30`,color:colors.primary,fontSize:'0.65rem',fontWeight:'bold'}})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:1.5,borderColor:`${colors.primary}30`}}),/*#__PURE__*/_jsx(Box,{sx:{fontSize:11},children:(_data$ratings=data.ratings)!==null&&_data$ratings!==void 0&&_data$ratings.length?/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:0.5,sx:{alignItems:'stretch'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center',gap:1,mb:1},children:[/*#__PURE__*/_jsx(Assessment,{sx:{fontSize:'1rem',color:colors.primary}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:colors.primary,fontWeight:'bold',fontSize:'0.75rem'},children:\"Consultant Ratings\"})]}),data.ratings.slice(0,3).map((r,i)=>/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',p:0.8,borderRadius:1.5,backgroundColor:`${colors.primary}15`,border:`1px solid ${colors.primary}20`},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{fontSize:'0.7rem',color:colors.primary,fontWeight:'medium'},children:r.consultant}),/*#__PURE__*/_jsx(Chip,{size:\"small\",label:r.rankgroup,sx:{backgroundColor:colorFor(r.rankgroup),color:'#fff',height:20,fontSize:'0.65rem',fontWeight:'bold','& .MuiChip-label':{px:1.5}}})]},i)),data.ratings.length>3&&/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'rgba(255, 255, 255, 0.6)',fontSize:'0.65rem',textAlign:'center',mt:0.5},children:[\"+\",data.ratings.length-3,\" more ratings\"]})]}):/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{opacity:0.7,fontStyle:'italic',color:colors.primary,fontSize:'0.75rem'},children:\"No ratings available\"})})]});});// 🔗 CUSTOM EDGE COMPONENT (Updated with BI_RECOMMENDS)\nexport const CustomEdge=/*#__PURE__*/React.memo(function CustomEdge(_ref6){let{id,sourceX,sourceY,targetX,targetY,selected,data}=_ref6;const[isHovered,setIsHovered]=useState(false);// Provide default values for data properties\nconst edgeData=data||{};const relType=edgeData.relType;const mandateStatus=edgeData.mandateStatus;const levelOfInfluence=edgeData.levelOfInfluence;const rating=edgeData.rating;const getEdgeColor=(relType,mandateStatus)=>{switch(relType){case'EMPLOYS':return'url(#employs-gradient)';case'COVERS':return'url(#covers-gradient)';case'RATES':return'url(#rates-gradient)';case'BI_RECOMMENDS':return'url(#bi-recommends-gradient)';// NEW\ncase'OWNS':// Color based on mandate status for client to product\nswitch(mandateStatus){case'Active':return STATUS_COLORS.active;// Green\ncase'At Risk':return STATUS_COLORS.atRisk;// Red  \ncase'Conversion in Progress':return STATUS_COLORS.inProgress;// Orange\ndefault:return'url(#owns-gradient)';}default:return'#94a3b8';}};const getEdgeWidth=(relType,levelOfInfluence)=>{if(relType==='COVERS'&&levelOfInfluence){// Significantly increased width mapping for visibility\nconst widthMap={'UNK':6,'1':6,'2':10,'3':14,'4':14,'High':14,'medium':10,'low':6};// Convert to string if it's a number\nconst influenceKey=String(levelOfInfluence);const baseWidth=widthMap[influenceKey]||8;return isHovered?baseWidth+3:baseWidth;// Add 3px on hover\n}// Special width for BI_RECOMMENDS (thicker to show importance)\nif(relType==='BI_RECOMMENDS'){return isHovered?12:8;}// Much larger minimum width for visibility\nreturn isHovered?10:selected?8:6;};const stroke=getEdgeColor(relType,mandateStatus);const width=getEdgeWidth(relType,levelOfInfluence);const midX=(sourceX+targetX)/2;const midY=(sourceY+targetY)/2;// Calculate path for better interaction\nconst edgePath=`M ${sourceX} ${sourceY} L ${targetX} ${targetY}`;// ✅ UPDATED: Enhanced label text for BI_RECOMMENDS\nconst getLabelText=()=>{if(relType==='COVERS'){return'COVERS';}if(relType==='RATES'&&rating){return rating;}if(relType==='OWNS'){return'OWNS';}if(relType==='BI_RECOMMENDS'){return'BI RECOMMENDS';// Show \"RECOMMENDS\" for BI_RECOMMENDS\n}return relType||'';};const getLabelColor=()=>{if(relType==='OWNS'&&mandateStatus){switch(mandateStatus){case'Active':return{bg:STATUS_COLORS.active,text:'white'};case'At Risk':return{bg:STATUS_COLORS.atRisk,text:'white'};case'Conversion in Progress':return{bg:STATUS_COLORS.inProgress,text:'white'};default:return{bg:APP_THEME_COLORS.surface,text:'white'};}}if(relType==='BI_RECOMMENDS'){return{bg:'#f59e0b',text:'white'};// Amber background for recommendations\n}return{bg:APP_THEME_COLORS.surface,text:'white'};};return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsxs(\"defs\",{children:[/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"employs-gradient\",x1:\"0%\",y1:\"0%\",x2:\"100%\",y2:\"0%\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:APP_THEME_COLORS.primary}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:APP_THEME_COLORS.secondary})]}),/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"covers-gradient\",x1:\"0%\",y1:\"0%\",x2:\"100%\",y2:\"0%\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:APP_THEME_COLORS.primary}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:ENTITY_COLORS.company.primary})]}),/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"rates-gradient\",x1:\"0%\",y1:\"0%\",x2:\"100%\",y2:\"0%\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:\"#8b5cf6\"}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:\"#7c3aed\"})]}),/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"owns-gradient\",x1:\"0%\",y1:\"0%\",x2:\"100%\",y2:\"0%\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:ENTITY_COLORS.company.primary}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:ENTITY_COLORS.product.primary})]}),/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"bi-recommends-gradient\",x1:\"0%\",y1:\"0%\",x2:\"100%\",y2:\"0%\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:\"#f59e0b\"}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:\"#d97706\"})]})]}),/*#__PURE__*/_jsx(\"path\",{d:edgePath,fill:\"none\",stroke:\"transparent\",strokeWidth:\"30\",style:{cursor:'pointer'},onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false)}),/*#__PURE__*/_jsx(\"path\",{id:id,fill:\"none\",stroke:stroke,strokeWidth:width,d:edgePath,strokeLinecap:\"round\",strokeLinejoin:\"round\",style:{filter:isHovered?`drop-shadow(0 0 8px ${stroke})`:'none',transition:'all 0.3s ease',pointerEvents:'none',opacity:1,zIndex:1,// Special styling for BI_RECOMMENDS\nstrokeDasharray:relType==='BI_RECOMMENDS'?'8 4':'none'}}),/*#__PURE__*/_jsx(\"path\",{id:`${id}-background`,fill:\"none\",stroke:\"rgba(255, 255, 255, 0.1)\",strokeWidth:width+2,d:edgePath,strokeLinecap:\"round\",strokeLinejoin:\"round\",style:{opacity:0.3,pointerEvents:'none',zIndex:0}}),getLabelText()&&/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"rect\",{x:midX-(relType==='BI_RECOMMENDS'?50:35),y:midY-(relType==='BI_RECOMMENDS'?15:12),width:relType==='BI_RECOMMENDS'?100:70,height:relType==='BI_RECOMMENDS'?30:30,fill:getLabelColor().bg,rx:relType==='BI_RECOMMENDS'?15:10,style:{opacity:isHovered?1:0.9,transition:'opacity 0.3s ease',filter:isHovered?'drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3))':'none'}}),(relType==='OWNS'&&mandateStatus||relType==='BI_RECOMMENDS')&&/*#__PURE__*/_jsx(\"rect\",{x:midX-(relType==='BI_RECOMMENDS'?50:35),y:midY-(relType==='BI_RECOMMENDS'?15:12),width:relType==='BI_RECOMMENDS'?100:70,height:relType==='BI_RECOMMENDS'?30:30,fill:\"none\",stroke:\"rgba(255, 255, 255, 0.3)\",strokeWidth:\"1\",rx:relType==='BI_RECOMMENDS'?15:10}),/*#__PURE__*/_jsx(\"text\",{x:midX,y:midY+(relType==='BI_RECOMMENDS'?5:2),textAnchor:\"middle\",style:{fontSize:relType==='BI_RECOMMENDS'?14:isHovered?12:10,fill:getLabelColor().text,fontWeight:relType==='OWNS'&&mandateStatus||relType==='BI_RECOMMENDS'?'bold':isHovered?'bold':'normal',pointerEvents:'none',transition:'all 0.3s ease',letterSpacing:relType==='BI_RECOMMENDS'?'0.5px':'normal'},children:getLabelText()}),relType==='BI_RECOMMENDS'&&/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"circle\",{cx:midX+35,cy:midY,r:\"8\",fill:\"rgba(255, 255, 255, 0.2)\",stroke:\"rgba(255, 255, 255, 0.4)\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"text\",{x:midX+35,y:midY+3,textAnchor:\"middle\",style:{fontSize:10,fill:'white',fontWeight:'bold',pointerEvents:'none'},children:\"\\u2728\"})]})]})]});});// 📋 NODE/EDGE TYPE MAPS (Updated)\nexport const nodeTypes={CONSULTANT:ConsultantNode,FIELD_CONSULTANT:FieldConsultantNode,COMPANY:CompanyNode,PRODUCT:ProductNode,INCUMBENT_PRODUCT:IncumbentProductNode// NEW\n};export const edgeTypes={custom:CustomEdge};// 🎨 EXPORT COLOR CONSTANTS\nexport{APP_THEME_COLORS,ENTITY_COLORS,STATUS_COLORS};","map":{"version":3,"names":["React","useState","Handle","Position","Box","Typography","Divider","Chip","Stack","BusinessCenter","Person","CorporateFare","AccountBalance","TrendingUp","Assessment","Analytics","ShowChart","Psychology","getConsultantColorById","APP_THEME_COLORS","ENTITY_COLORS","STATUS_COLORS","jsx","_jsx","jsxs","_jsxs","findParentConsultant","fieldConsultantData","parentConsultantId","console","log","id","consultantId","includes","replace","parts","split","length","pca","name","nameMatch","match","_fieldConsultantData$","_fieldConsultantData$2","region","number","ConsultantNode","memo","_ref","data","isHovered","setIsHovered","colors","style","padding","background","light","color","borderRadius","minWidth","textAlign","boxShadow","primary","transform","transition","border","backdropFilter","onMouseEnter","onMouseLeave","children","sx","display","alignItems","justifyContent","mb","gap","fontSize","variant","fontWeight","textTransform","letterSpacing","mt","width","height","secondary","type","position","Bottom","FieldConsultantNode","_ref2","Top","mx","company","CompanyNode","_ref3","product","IncumbentProductNode","_ref4","evestment_product_guid","label","slice","size","bgcolor","ProductNode","_ref5","_data$ratings","colorFor","rg","positive","negative","neutral","getProductIcon","_data$asset_class","assetClass","asset_class","toLowerCase","universe_name","universe_score","mr","my","borderColor","ratings","direction","spacing","map","r","i","p","backgroundColor","consultant","rankgroup","px","opacity","fontStyle","CustomEdge","_ref6","sourceX","sourceY","targetX","targetY","selected","edgeData","relType","mandateStatus","levelOfInfluence","rating","getEdgeColor","active","atRisk","inProgress","getEdgeWidth","widthMap","influenceKey","String","baseWidth","stroke","midX","midY","edgePath","getLabelText","getLabelColor","bg","text","surface","x1","y1","x2","y2","offset","stopColor","d","fill","strokeWidth","cursor","strokeLinecap","strokeLinejoin","filter","pointerEvents","zIndex","strokeDasharray","x","y","rx","textAnchor","cx","cy","nodeTypes","CONSULTANT","FIELD_CONSULTANT","COMPANY","PRODUCT","INCUMBENT_PRODUCT","edgeTypes","custom"],"sources":["/Users/prabhakarmudliyar/text-to-cypher-mui/frontend/src/components/components/NodeComponents.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Handle, Position, NodeProps, EdgeProps } from 'reactflow';\nimport { \n  Box, \n  Typography, \n  Divider, \n  Chip, \n  Stack, \n  LinearProgress\n} from '@mui/material';\nimport { \n  BusinessCenter,        \n  Person,               \n  CorporateFare,        \n  AccountBalance,       \n  TrendingUp,           \n  Assessment,           \n  Analytics,            \n  ShowChart,\n  Psychology,          // For incumbent products\n  Recommend,           // For incumbent products\n  AutoAwesome          // For BI_RECOMMENDS edges\n} from '@mui/icons-material';\nimport { AppNodeData, EdgeData, RankGroup } from '../types/GraphTypes';\nimport { \n  getConsultantColorById,\n  APP_THEME_COLORS,\n  ENTITY_COLORS,\n  STATUS_COLORS\n} from '../config/ConsultantColors';\n\n// Helper function to find the consultant this field consultant belongs to\nconst findParentConsultant = (fieldConsultantData: AppNodeData) => {\n  // Method 1: Use explicit parentConsultantId if available (PREFERRED)\n  if (fieldConsultantData.parentConsultantId) {\n    console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Parent consultant ${fieldConsultantData.parentConsultantId} (explicit)`);\n    return fieldConsultantData.parentConsultantId;\n  }\n  \n  // Method 2: Extract from naming pattern (e.g., \"NAI_F1\" -> \"NAI_C1\")\n  if (fieldConsultantData.id) {\n    let consultantId = fieldConsultantData.id;\n    \n    if (consultantId.includes('_F')) {\n      consultantId = consultantId.replace('_F', '_C');\n    } else if (consultantId.includes('FIELD_CONSULTANT')) {\n      consultantId = consultantId.replace('FIELD_CONSULTANT', 'CONSULTANT');\n    } else if (consultantId.includes('FIELD')) {\n      consultantId = consultantId.replace('FIELD', 'CONSULTANT');\n    } else {\n      const parts = consultantId.split('_');\n      if (parts.length >= 2) {\n        consultantId = `${parts[0]}_C${parts[parts.length - 1]}`;\n      }\n    }\n    \n    console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Parent consultant ${consultantId} (pattern matching)`);\n    return consultantId;\n  }\n  \n  // Method 3: Use PCA if available (fallback)\n  if (fieldConsultantData.pca) {\n    console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Using PCA ${fieldConsultantData.pca}`);\n    return fieldConsultantData.pca;\n  }\n  \n  // Method 4: Extract from name pattern\n  if (fieldConsultantData.name) {\n    const nameMatch = fieldConsultantData.name.match(/(\\w+)\\s*\\d*\\s*\\((\\w+)\\)/);\n    if (nameMatch) {\n      const region = nameMatch[2];\n      const number = fieldConsultantData.id?.match(/\\d+$/)?.[0] || '1';\n      const consultantId = `${region}_C${number}`;\n      console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Extracted from name: ${consultantId}`);\n      return consultantId;\n    }\n  }\n  \n  // Fallback\n  console.log(`🔗 Field consultant ${fieldConsultantData.id} -> Using own ID as fallback`);\n  return fieldConsultantData.id || 'default';\n};\n\nexport const ConsultantNode = React.memo(function ConsultantNode({ data }: NodeProps<AppNodeData>) {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // Get color from curated palette (imported from config)\n  const colors = getConsultantColorById(data.id);\n  \n  return (\n    <div \n      style={{ \n        padding: 16, \n        background: colors.light, \n        color: 'white', \n        borderRadius: 16, \n        minWidth: 200, \n        textAlign: 'center',\n        boxShadow: isHovered ? `0 8px 32px ${colors.primary}66` : `0 4px 16px ${colors.primary}33`,\n        transform: isHovered ? 'scale(1.05)' : 'scale(1)',\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n        border: `2px solid ${colors.primary}`,\n        backdropFilter: 'blur(10px)',\n      }}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mb: 1, gap: 1 }}>\n        <BusinessCenter sx={{ fontSize: '1.5rem', color: colors.primary }} />\n        <Typography variant=\"caption\" sx={{ \n          color: `${colors.primary}dd`, \n          fontWeight: 'bold',\n          textTransform: 'uppercase',\n          letterSpacing: '0.5px',\n          fontSize: '0.7rem'\n        }}>\n          Consultant\n        </Typography>\n      </Box>\n      <Typography variant=\"body1\" sx={{ \n        fontWeight: 'bold', \n        fontSize: '0.95rem', \n        color: colors.primary,\n        mb: 0.5\n      }}>\n        {data.name}\n      </Typography>\n      \n      {/* Color indicator */}\n      <Box sx={{\n        mt: 1,\n        width: '100%',\n        height: '3px',\n        background: `linear-gradient(90deg, ${colors.primary} 0%, ${colors.secondary} 100%)`,\n        borderRadius: '2px'\n      }} />\n      \n      <Handle type=\"source\" position={Position.Bottom} style={{ background: colors.primary }} />\n    </div>\n  );\n});\n\nexport const FieldConsultantNode = React.memo(function FieldConsultantNode({ data }: NodeProps<AppNodeData>) {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // Get parent consultant's color (inherits from parent)\n  const parentConsultantId = findParentConsultant(data);\n  const colors = getConsultantColorById(parentConsultantId);\n  \n  return (\n    <div \n      style={{ \n        padding: 16, \n        background: colors.light, \n        color: 'white', \n        borderRadius: 16, \n        minWidth: 200, \n        textAlign: 'center',\n        boxShadow: isHovered ? `0 8px 32px ${colors.primary}66` : `0 4px 16px ${colors.primary}33`,\n        transform: isHovered ? 'scale(1.05)' : 'scale(1)',\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n        border: `2px dashed ${colors.primary}`, // Dashed border to show it's a subordinate\n        backdropFilter: 'blur(10px)',\n      }}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <Handle type=\"target\" position={Position.Top} style={{ background: colors.primary }} />\n      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mb: 1, gap: 1 }}>\n        <Person sx={{ fontSize: '1.5rem', color: colors.primary }} />\n        <Typography variant=\"caption\" sx={{ \n          color: `${colors.primary}dd`, \n          fontWeight: 'bold',\n          textTransform: 'uppercase',\n          letterSpacing: '0.5px',\n          fontSize: '0.7rem'\n        }}>\n          Field Consultant\n        </Typography>\n      </Box>\n      <Typography variant=\"body1\" sx={{ \n        fontWeight: 'bold', \n        fontSize: '0.95rem', \n        color: colors.primary,\n        mb: 0.5\n      }}>\n        {data.name}\n      </Typography>\n      \n      {/* Color indicator - thinner for field consultant */}\n      <Box sx={{\n        mt: 1,\n        width: '80%',\n        height: '2px',\n        background: `linear-gradient(90deg, ${colors.primary} 0%, ${colors.secondary} 100%)`,\n        borderRadius: '2px',\n        mx: 'auto'\n      }} />\n      \n      <Handle type=\"source\" position={Position.Bottom} style={{ background: ENTITY_COLORS.company.primary }} />\n    </div>\n  );\n});\n\n// 🏢 COMPANY NODE COMPONENT\nexport const CompanyNode = React.memo(function CompanyNode({ data }: NodeProps<AppNodeData>) {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // Use fixed company colors (separate from consultants)\n  const colors = ENTITY_COLORS.company;\n  \n  return (\n    <div \n      style={{ \n        padding: 16, \n        background: colors.light, \n        color: 'white', \n        borderRadius: 16, \n        minWidth: 220, \n        textAlign: 'center',\n        boxShadow: isHovered ? `0 8px 32px ${colors.primary}66` : `0 4px 16px ${colors.primary}33`,\n        transform: isHovered ? 'scale(1.05)' : 'scale(1)',\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n        border: `2px solid ${colors.primary}`,\n        backdropFilter: 'blur(10px)',\n      }}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <Handle type=\"target\" position={Position.Top} style={{ background: 'inherit' }} />\n      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mb: 1, gap: 1 }}>\n        <CorporateFare sx={{ fontSize: '1.5rem', color: colors.primary }} />\n        <Typography variant=\"caption\" sx={{ \n          color: `${colors.primary}dd`, \n          fontWeight: 'bold',\n          textTransform: 'uppercase',\n          letterSpacing: '0.5px',\n          fontSize: '0.7rem'\n        }}>\n          Company\n        </Typography>\n      </Box>\n      <Typography variant=\"body1\" sx={{ \n        fontWeight: 'bold', \n        fontSize: '0.95rem', \n        color: colors.primary,\n        mb: 0.5\n      }}>\n        {data.name}\n      </Typography>\n      <Handle type=\"source\" position={Position.Bottom} style={{ background: ENTITY_COLORS.product.primary }} />\n    </div>\n  );\n});\n\n// 🏦 INCUMBENT PRODUCT NODE COMPONENT (NEW)\nexport const IncumbentProductNode = React.memo(function IncumbentProductNode({ data }: NodeProps<AppNodeData>) {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // 🎨 DISTINCT COLOR SCHEME for incumbent products\n  const colors = {\n    primary: '#f59e0b',    // Amber for incumbent products\n    secondary: '#d97706',  // Darker amber\n    light: 'linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(217, 119, 6, 0.1) 100%)'\n  };\n  \n  return (\n    <div \n      style={{ \n        padding: 18, \n        background: colors.light, \n        color: 'white', \n        borderRadius: 18, \n        minWidth: 280, \n        textAlign: 'center',\n        boxShadow: isHovered ? `0 12px 48px ${colors.primary}40` : `0 6px 24px ${colors.primary}20`,\n        transform: isHovered ? 'scale(1.03)' : 'scale(1)',\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n        border: `2px solid ${colors.primary}`,\n        backdropFilter: 'blur(20px)',\n      }}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <Handle type=\"target\" position={Position.Top} style={{ background: ENTITY_COLORS.company.primary }} />\n      \n      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mb: 1.5, gap: 1 }}>\n        <Psychology sx={{ fontSize: '1.5rem', color: colors.primary }} />\n        <Box sx={{ textAlign: 'left' }}>\n          <Typography variant=\"caption\" sx={{ \n            color: colors.primary, \n            fontWeight: 'bold',\n            textTransform: 'uppercase',\n            letterSpacing: '0.5px',\n            fontSize: '0.7rem',\n            display: 'block'\n          }}>\n            Incumbent Product\n          </Typography>\n          <Typography variant=\"caption\" sx={{ \n            color: 'rgba(255, 255, 255, 0.7)',\n            fontSize: '0.65rem',\n            display: 'block'\n          }}>\n            Recommendation Engine\n          </Typography>\n        </Box>\n      </Box>\n\n      <Typography variant=\"body1\" sx={{ \n        fontWeight: 'bold', \n        fontSize: '1rem', \n        color: colors.primary,\n        mb: 1\n      }}>\n        {data.name}\n      </Typography>\n\n      {/* Show evestment_product_guid if available */}\n      {data.evestment_product_guid && (\n        <Chip \n          label={`GUID: ${data.evestment_product_guid.slice(0, 8)}...`}\n          size=\"small\"\n          sx={{\n            bgcolor: `${colors.primary}20`,\n            color: colors.primary,\n            fontSize: '0.65rem',\n            fontWeight: 'bold',\n            mb: 1\n          }}\n        />\n      )}\n\n      \n      \n      <Handle type=\"source\" position={Position.Bottom} style={{ background: ENTITY_COLORS.product.primary }} />\n    </div>\n  );\n});\n\n// 🏦 PRODUCT NODE COMPONENT (Updated)\nexport const ProductNode = React.memo(function ProductNode({ data }: NodeProps<AppNodeData>) {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // Use fixed product colors (separate from consultants)\n  const colors = ENTITY_COLORS.product;\n  \n  const colorFor = (rg: RankGroup) =>\n    rg === 'Positive' ? STATUS_COLORS.positive : \n    rg === 'Negative' ? STATUS_COLORS.negative : \n    rg === 'Introduced' ? STATUS_COLORS.neutral : \n    rg === 'Neutral' ? STATUS_COLORS.neutral : STATUS_COLORS.neutral;\n\n  // Determine product icon based on asset class\n  const getProductIcon = () => {\n    const assetClass = data.asset_class?.toLowerCase();\n    switch (assetClass) {\n      case 'equities':\n        return <ShowChart sx={{ fontSize: '1.5rem', color: colors.primary }} />;\n      case 'fixed income':\n        return <AccountBalance sx={{ fontSize: '1.5rem', color: colors.primary }} />;\n      case 'alternatives':\n        return <Analytics sx={{ fontSize: '1.5rem', color: colors.primary }} />;\n      case 'real estate':\n        return <CorporateFare sx={{ fontSize: '1.5rem', color: colors.primary }} />;\n      default:\n        return <TrendingUp sx={{ fontSize: '1.5rem', color: colors.primary }} />;\n    }\n  };\n\n  return (\n    <div \n      style={{ \n        padding: 18, \n        background: colors.light, \n        color: 'white', \n        borderRadius: 18, \n        minWidth: 260, \n        textAlign: 'center',\n        boxShadow: isHovered ? `0 12px 48px ${colors.primary}40` : `0 6px 24px ${colors.primary}20`,\n        transform: isHovered ? 'scale(1.03)' : 'scale(1)',\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n        border: `2px solid ${colors.primary}`,\n        backdropFilter: 'blur(20px)',\n      }}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <Handle type=\"target\" position={Position.Top} style={{ background: ENTITY_COLORS.company.primary }} />\n      \n      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mb: 1.5, gap: 1 }}>\n        {getProductIcon()}\n        <Box sx={{ textAlign: 'left' }}>\n          <Typography variant=\"caption\" sx={{ \n            color: colors.primary, \n            fontWeight: 'bold',\n            textTransform: 'uppercase',\n            letterSpacing: '0.5px',\n            fontSize: '0.7rem',\n            display: 'block'\n          }}>\n            Product\n          </Typography>\n          <Typography variant=\"caption\" sx={{ \n            color: 'rgba(255, 255, 255, 0.7)',\n            fontSize: '0.65rem',\n            display: 'block'\n          }}>\n            {data.asset_class || 'Investment Solution'}\n          </Typography>\n        </Box>\n      </Box>\n\n      <Typography variant=\"body1\" sx={{ \n        fontWeight: 'bold', \n        fontSize: '1rem', \n        color: colors.primary,\n        mb: 1\n      }}>\n        {data.name}\n      </Typography>\n\n      {/* Show universe properties if available */}\n      {(data.universe_name || data.universe_score) && (\n        <Box sx={{ mb: 1 }}>\n          {data.universe_name && (\n            <Chip \n              label={data.universe_name}\n              size=\"small\"\n              sx={{\n                bgcolor: `${colors.primary}20`,\n                color: colors.primary,\n                fontSize: '0.65rem',\n                fontWeight: 'bold',\n                mr: 0.5\n              }}\n            />\n          )}\n          {data.universe_score && (\n            <Chip \n              label={`Score: ${data.universe_score}`}\n              size=\"small\"\n              sx={{\n                bgcolor: `${colors.primary}30`,\n                color: colors.primary,\n                fontSize: '0.65rem',\n                fontWeight: 'bold'\n              }}\n            />\n          )}\n        </Box>\n      )}\n\n      <Divider sx={{ my: 1.5, borderColor: `${colors.primary}30` }} />\n      \n      <Box sx={{ fontSize: 11 }}>\n        {data.ratings?.length ? (\n          <Stack direction=\"column\" spacing={0.5} sx={{ alignItems: 'stretch' }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 1, mb: 1 }}>\n              <Assessment sx={{ fontSize: '1rem', color: colors.primary }} />\n              <Typography variant=\"caption\" sx={{ \n                color: colors.primary, \n                fontWeight: 'bold',\n                fontSize: '0.75rem'\n              }}>\n                Consultant Ratings\n              </Typography>\n            </Box>\n            {data.ratings.slice(0, 3).map((r: any, i: number) => (\n              <Box\n                key={i}\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  p: 0.8,\n                  borderRadius: 1.5,\n                  backgroundColor: `${colors.primary}15`,\n                  border: `1px solid ${colors.primary}20`\n                }}\n              >\n                <Typography variant=\"caption\" sx={{ \n                  fontSize: '0.7rem', \n                  color: colors.primary,\n                  fontWeight: 'medium'\n                }}>\n                  {r.consultant}\n                </Typography>\n                <Chip\n                  size=\"small\"\n                  label={r.rankgroup}\n                  sx={{\n                    backgroundColor: colorFor(r.rankgroup),\n                    color: '#fff',\n                    height: 20,\n                    fontSize: '0.65rem',\n                    fontWeight: 'bold',\n                    '& .MuiChip-label': { px: 1.5 }\n                  }}\n                />\n              </Box>\n            ))}\n            {data.ratings.length > 3 && (\n              <Typography variant=\"caption\" sx={{ \n                color: 'rgba(255, 255, 255, 0.6)',\n                fontSize: '0.65rem',\n                textAlign: 'center',\n                mt: 0.5\n              }}>\n                +{data.ratings.length - 3} more ratings\n              </Typography>\n            )}\n          </Stack>\n        ) : (\n          <Typography variant=\"caption\" sx={{ \n            opacity: 0.7, \n            fontStyle: 'italic', \n            color: colors.primary,\n            fontSize: '0.75rem'\n          }}>\n            No ratings available\n          </Typography>\n        )}\n      </Box>\n    </div>\n  );\n});\n\n// 🔗 CUSTOM EDGE COMPONENT (Updated with BI_RECOMMENDS)\nexport const CustomEdge = React.memo(function CustomEdge({\n  id, sourceX, sourceY, targetX, targetY, selected, data,\n}: EdgeProps<EdgeData>) {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // Provide default values for data properties\n  const edgeData = data || {};\n  const relType = edgeData.relType;\n  const mandateStatus = edgeData.mandateStatus;\n  const levelOfInfluence = edgeData.levelOfInfluence;\n  const rating = edgeData.rating;\n  \n  const getEdgeColor = (relType?: string, mandateStatus?: string) => {\n    switch (relType) {\n      case 'EMPLOYS': return 'url(#employs-gradient)';\n      case 'COVERS': return 'url(#covers-gradient)';\n      case 'RATES': return 'url(#rates-gradient)';\n      case 'BI_RECOMMENDS': return 'url(#bi-recommends-gradient)'; // NEW\n      case 'OWNS': \n        // Color based on mandate status for client to product\n        switch (mandateStatus) {\n          case 'Active': return STATUS_COLORS.active;                    // Green\n          case 'At Risk': return STATUS_COLORS.atRisk;                   // Red  \n          case 'Conversion in Progress': return STATUS_COLORS.inProgress; // Orange\n          default: return 'url(#owns-gradient)';\n        }\n      default: return '#94a3b8';\n    }\n  };\n\n  const getEdgeWidth = (relType?: string, levelOfInfluence?: string | number) => {\n    if (relType === 'COVERS' && levelOfInfluence) {\n      // Significantly increased width mapping for visibility\n      const widthMap: { [key: string]: number } = {\n        'UNK': 6,\n        '1': 6,\n        '2': 10,\n        '3': 14,\n        '4': 14,\n        'High': 14,\n        'medium': 10,\n        'low': 6\n      };\n      \n      // Convert to string if it's a number\n      const influenceKey = String(levelOfInfluence);\n      const baseWidth = widthMap[influenceKey] || 8;\n      return isHovered ? baseWidth + 3 : baseWidth; // Add 3px on hover\n    }\n    \n    // Special width for BI_RECOMMENDS (thicker to show importance)\n    if (relType === 'BI_RECOMMENDS') {\n      return isHovered ? 12 : 8;\n    }\n    \n    // Much larger minimum width for visibility\n    return isHovered ? 10 : selected ? 8 : 6;\n  };\n\n  const stroke = getEdgeColor(relType, mandateStatus);\n  const width = getEdgeWidth(relType, levelOfInfluence);\n  const midX = (sourceX + targetX) / 2;\n  const midY = (sourceY + targetY) / 2;\n\n  // Calculate path for better interaction\n  const edgePath = `M ${sourceX} ${sourceY} L ${targetX} ${targetY}`;\n\n  // ✅ UPDATED: Enhanced label text for BI_RECOMMENDS\n  const getLabelText = () => {\n    if (relType === 'COVERS') {\n      return 'COVERS';\n    }\n    if (relType === 'RATES' && rating) {\n      return rating;\n    }\n    if (relType === 'OWNS') {\n      return 'OWNS';\n    }\n    if (relType === 'BI_RECOMMENDS') {\n      return 'BI RECOMMENDS'; // Show \"RECOMMENDS\" for BI_RECOMMENDS\n    }\n    return relType || '';\n  };\n\n  const getLabelColor = () => {\n    if (relType === 'OWNS' && mandateStatus) {\n      switch (mandateStatus) {\n        case 'Active': return { bg: STATUS_COLORS.active, text: 'white' };\n        case 'At Risk': return { bg: STATUS_COLORS.atRisk, text: 'white' };\n        case 'Conversion in Progress': return { bg: STATUS_COLORS.inProgress, text: 'white' };\n        default: return { bg: APP_THEME_COLORS.surface, text: 'white' };\n      }\n    }\n    if (relType === 'BI_RECOMMENDS') {\n      return { bg: '#f59e0b', text: 'white' }; // Amber background for recommendations\n    }\n    return { bg: APP_THEME_COLORS.surface, text: 'white' };\n  };\n\n  return (\n    <g>\n      <defs>\n        <linearGradient id=\"employs-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor={APP_THEME_COLORS.primary} />\n          <stop offset=\"100%\" stopColor={APP_THEME_COLORS.secondary} />\n        </linearGradient>\n        <linearGradient id=\"covers-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor={APP_THEME_COLORS.primary} />\n          <stop offset=\"100%\" stopColor={ENTITY_COLORS.company.primary} />\n        </linearGradient>\n        <linearGradient id=\"rates-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#8b5cf6\" />\n          <stop offset=\"100%\" stopColor=\"#7c3aed\" />\n        </linearGradient>\n        <linearGradient id=\"owns-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor={ENTITY_COLORS.company.primary} />\n          <stop offset=\"100%\" stopColor={ENTITY_COLORS.product.primary} />\n        </linearGradient>\n        {/* NEW: BI_RECOMMENDS gradient */}\n        <linearGradient id=\"bi-recommends-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#f59e0b\" />\n          <stop offset=\"100%\" stopColor=\"#d97706\" />\n        </linearGradient>\n      </defs>\n      \n      {/* Invisible thick path for better hover detection */}\n      <path \n        d={edgePath}\n        fill=\"none\"\n        stroke=\"transparent\"\n        strokeWidth=\"30\"\n        style={{ cursor: 'pointer' }}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      />\n      \n      {/* Visible edge path with enhanced visibility */}\n      <path \n        id={id} \n        fill=\"none\" \n        stroke={stroke} \n        strokeWidth={width} \n        d={edgePath}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        style={{ \n          filter: isHovered ? `drop-shadow(0 0 8px ${stroke})` : 'none',\n          transition: 'all 0.3s ease',\n          pointerEvents: 'none',\n          opacity: 1,\n          zIndex: 1,\n          // Special styling for BI_RECOMMENDS\n          strokeDasharray: relType === 'BI_RECOMMENDS' ? '8 4' : 'none'\n        }}\n      />\n      \n      {/* Additional background stroke for even better visibility */}\n      <path \n        id={`${id}-background`} \n        fill=\"none\" \n        stroke=\"rgba(255, 255, 255, 0.1)\" \n        strokeWidth={width + 2} \n        d={edgePath}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        style={{ \n          opacity: 0.3,\n          pointerEvents: 'none',\n          zIndex: 0\n        }}\n      />\n      \n      {/* Edge label - always visible for important relationships */}\n      {getLabelText() && (\n  <g>\n    {/* Enhanced label background with dynamic sizing */}\n    <rect\n      x={midX - (relType === 'BI_RECOMMENDS' ? 50 : 35)}\n      y={midY - (relType === 'BI_RECOMMENDS' ? 15 : 12)}\n      width={relType === 'BI_RECOMMENDS' ? 100 : 70}\n      height={relType === 'BI_RECOMMENDS' ? 30 : 30}\n      fill={getLabelColor().bg}\n      rx={relType === 'BI_RECOMMENDS' ? 15 : 10}\n      style={{ \n        opacity: isHovered ? 1 : 0.9,\n        transition: 'opacity 0.3s ease',\n        filter: isHovered ? 'drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3))' : 'none'\n      }}\n    />\n    \n    {/* Border for mandate status labels and BI_RECOMMENDS */}\n    {((relType === 'OWNS' && mandateStatus) || relType === 'BI_RECOMMENDS') && (\n      <rect\n          x={midX - (relType === 'BI_RECOMMENDS' ? 50 : 35)}\n          y={midY - (relType === 'BI_RECOMMENDS' ? 15 : 12)}\n          width={relType === 'BI_RECOMMENDS' ? 100 : 70}\n          height={relType === 'BI_RECOMMENDS' ? 30 : 30}\n          fill=\"none\"\n          stroke=\"rgba(255, 255, 255, 0.3)\"\n          strokeWidth=\"1\"\n          rx={relType === 'BI_RECOMMENDS' ? 15 : 10}\n        />\n      )}\n      \n      {/* Enhanced text with better positioning for BI_RECOMMENDS */}\n      <text \n        x={midX} \n        y={midY + (relType === 'BI_RECOMMENDS' ? 5 : 2)} \n        textAnchor=\"middle\" \n        style={{ \n          fontSize: relType === 'BI_RECOMMENDS' ? 14 : (isHovered ? 12 : 10), \n          fill: getLabelColor().text, \n          fontWeight: ((relType === 'OWNS' && mandateStatus) || relType === 'BI_RECOMMENDS') ? 'bold' : isHovered ? 'bold' : 'normal',\n          pointerEvents: 'none',\n          transition: 'all 0.3s ease',\n          letterSpacing: relType === 'BI_RECOMMENDS' ? '0.5px' : 'normal'\n        }}\n      >\n        {getLabelText()}\n      </text>\n      \n      {/* Optional: Add a small icon for BI_RECOMMENDS */}\n      {relType === 'BI_RECOMMENDS' && (\n        <g>\n          {/* Star/sparkle icon */}\n          <circle\n            cx={midX + 35}\n            cy={midY}\n            r=\"8\"\n            fill=\"rgba(255, 255, 255, 0.2)\"\n            stroke=\"rgba(255, 255, 255, 0.4)\"\n            strokeWidth=\"1\"\n          />\n          <text\n            x={midX + 35}\n            y={midY + 3}\n            textAnchor=\"middle\"\n            style={{\n              fontSize: 10,\n              fill: 'white',\n              fontWeight: 'bold',\n              pointerEvents: 'none'\n            }}\n          >\n            ✨\n          </text>\n        </g>\n      )}\n    </g>\n  )}\n    </g>\n  );\n});\n\n// 📋 NODE/EDGE TYPE MAPS (Updated)\nexport const nodeTypes = {\n  CONSULTANT: ConsultantNode,\n  FIELD_CONSULTANT: FieldConsultantNode,\n  COMPANY: CompanyNode,\n  PRODUCT: ProductNode,\n  INCUMBENT_PRODUCT: IncumbentProductNode, // NEW\n};\n\nexport const edgeTypes = { custom: CustomEdge };\n\n// 🎨 EXPORT COLOR CONSTANTS\nexport { APP_THEME_COLORS, ENTITY_COLORS, STATUS_COLORS };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}