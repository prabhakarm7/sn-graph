{"ast":null,"code":"var _jsxFileName = \"/Users/prabhakarmudliyar/text-to-cypher-mui/frontend/src/components/JPMGraphPreviewWithFilters.tsx\",\n  _s = $RefreshSig$();\n// JPMGraphPreviewWithFilters.tsx - FIXED Chat Tab and Tab Header Background\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport ReactFlow, { Background, Controls, MiniMap, useNodesState, useEdgesState, useReactFlow, ReactFlowProvider } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { Box, Drawer, Tabs, Tab, Typography, CircularProgress, Alert } from '@mui/material';\nimport { Chat as ChatIcon, FilterList as FilterIcon } from '@mui/icons-material';\n\n// Import components\nimport { nodeTypes, edgeTypes } from './components/NodeComponents';\nimport { ChatInterface } from './components/ChatInterface';\nimport { WorkingFiltersInterface } from './components/WorkingFiltersInterface';\nimport { StatsCards } from './components/StatsCards';\nimport { InsightsPanel } from './components/InsightsPanel';\nimport { DebugDataDisplay } from './components/DebugDataDisplay';\nimport { useGraphData } from './hooks/useGraphData';\nimport { GraphDataProvider } from './context/GraphDataProvider';\n\n// Move nodeTypes and edgeTypes outside component to prevent recreation\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STABLE_NODE_TYPES = nodeTypes;\nconst STABLE_EDGE_TYPES = edgeTypes;\n\n// Inner component that uses ReactFlow hooks\nfunction GraphComponent() {\n  _s();\n  const containerRef = useRef(null);\n  const {\n    fitView\n  } = useReactFlow();\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [selectedEdge, setSelectedEdge] = useState(null);\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [hoveredEdge, setHoveredEdge] = useState(null);\n  const [tabValue, setTabValue] = useState(1); // Start with filters tab\n  const [showDebug, setShowDebug] = useState(false); // Debug toggle state\n  const [isDarkTheme, setIsDarkTheme] = useState(true); // Theme toggle state\n\n  // üÜï NEW: Local recommendations mode state\n  const [recommendationsMode, setRecommendationsMode] = useState(false);\n\n  // üéØ USE ENHANCED useGraphData HOOK\n  const {\n    graphData,\n    // Already contains transformed nodes/edges\n    filterOptions,\n    currentFilters,\n    currentRegions,\n    initialLoading,\n    filterLoading,\n    error,\n    changeRegions,\n    // Already handles hierarchical region changes\n    applyFilters,\n    // Already handles hierarchical filtering\n    resetFilters,\n    getAvailableRegions,\n    hasData,\n    nodeCount,\n    edgeCount,\n    // üÜï NEW: Recommendations mode methods\n    switchMode,\n    // Switch between standard/recommendations\n    isRecommendationsMode,\n    // Detect current mode\n    dataSource,\n    // Track data source\n    currentMode // Current mode string\n  } = useGraphData();\n\n  // üÜï NEW: Sync local state with hook's mode detection\n  useEffect(() => {\n    setRecommendationsMode(isRecommendationsMode);\n  }, [isRecommendationsMode]);\n\n  // üÜï NEW: Handle recommendations mode changes\n  const handleRecommendationsModeChange = useCallback(async mode => {\n    console.log(`üéØ Switching to ${mode} mode`);\n    setRecommendationsMode(mode === 'recommendations');\n\n    // üéØ USE HOOK'S switchMode method\n    try {\n      await switchMode(mode, currentRegions);\n      console.log(`‚úÖ Successfully switched to ${mode} mode`);\n    } catch (err) {\n      console.error(`‚ùå Failed to switch to ${mode} mode:`, err);\n    }\n  }, [currentRegions, switchMode]);\n\n  // üéØ USE graphData directly from hook (no need for local state)\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n\n  // Update ReactFlow when graphData changes (from hook)\n  useEffect(() => {\n    console.log('üîÑ GraphData from hook changed:', {\n      nodes: graphData.nodes.length,\n      edges: graphData.edges.length,\n      incumbentProducts: graphData.nodes.filter(n => n.type === 'INCUMBENT_PRODUCT').length,\n      biRecommends: graphData.edges.filter(e => {\n        var _e$data;\n        return ((_e$data = e.data) === null || _e$data === void 0 ? void 0 : _e$data.relType) === 'BI_RECOMMENDS';\n      }).length,\n      mode: currentMode,\n      recommendationsMode\n    });\n    if (graphData.nodes.length === 0) {\n      setNodes([]);\n      setEdges([]);\n      return;\n    }\n\n    // Hook already provides layouted data, so use it directly\n    setNodes(graphData.nodes);\n    setEdges(graphData.edges);\n\n    // Apply fitView\n    const timeoutId = setTimeout(() => {\n      try {\n        fitView({\n          padding: 0.2,\n          duration: 500\n        });\n        console.log('‚úÖ FitView applied');\n      } catch (error) {\n        console.warn('‚ö†Ô∏è FitView failed:', error);\n      }\n    }, 150);\n    return () => clearTimeout(timeoutId);\n  }, [graphData, setNodes, setEdges, fitView, currentMode, recommendationsMode]);\n\n  // Debug: Log ReactFlow state changes - FIXED Set iteration\n  useEffect(() => {\n    var _nodes$0$data;\n    console.log('üîç ReactFlow nodes state changed:', {\n      count: nodes.length,\n      nodeIds: nodes.slice(0, 5).map(n => n.id),\n      nodeTypes: Array.from(new Set(nodes.map(n => n.type).filter(Boolean))),\n      // FIXED\n      sampleNode: nodes[0] ? {\n        id: nodes[0].id,\n        type: nodes[0].type,\n        name: (_nodes$0$data = nodes[0].data) === null || _nodes$0$data === void 0 ? void 0 : _nodes$0$data.name,\n        position: nodes[0].position\n      } : null\n    });\n  }, [nodes]);\n  useEffect(() => {\n    var _edges$0$data;\n    console.log('üîç ReactFlow edges state changed:', {\n      count: edges.length,\n      edgeIds: edges.slice(0, 5).map(e => e.id),\n      edgeTypes: Array.from(new Set(edges.map(e => {\n        var _e$data2;\n        return (_e$data2 = e.data) === null || _e$data2 === void 0 ? void 0 : _e$data2.relType;\n      }).filter(Boolean))),\n      // FIXED\n      sampleEdge: edges[0] ? {\n        id: edges[0].id,\n        source: edges[0].source,\n        target: edges[0].target,\n        type: edges[0].type,\n        relType: (_edges$0$data = edges[0].data) === null || _edges$0$data === void 0 ? void 0 : _edges$0$data.relType\n      } : null\n    });\n  }, [edges]);\n\n  // FIXED: ResizeObserver with proper error handling\n  useEffect(() => {\n    const observerCb = entries => {\n      try {\n        window.requestAnimationFrame(() => {\n          if (!Array.isArray(entries) || !entries.length) return;\n          // Process resize entries if needed\n          // For now, we just ensure the callback doesn't throw errors\n        });\n      } catch (error) {\n        // Silently catch ResizeObserver errors to prevent console spam\n        console.debug('ResizeObserver callback error (safely ignored):', error);\n      }\n    };\n    let resizeObserver = null;\n    try {\n      resizeObserver = new ResizeObserver(observerCb);\n      if (containerRef.current) {\n        resizeObserver.observe(containerRef.current);\n      }\n    } catch (error) {\n      console.warn('Failed to create ResizeObserver:', error);\n    }\n    return () => {\n      try {\n        if (resizeObserver) {\n          resizeObserver.disconnect();\n        }\n      } catch (error) {\n        console.debug('ResizeObserver disconnect error (safely ignored):', error);\n      }\n    };\n  }, []);\n  const handleNodeClick = (event, node) => {\n    setSelectedNode(node);\n    setSelectedEdge(null);\n  };\n  const handleEdgeClick = (event, edge) => {\n    setSelectedEdge(edge);\n    setSelectedNode(null);\n  };\n  const handleNodeMouseEnter = (event, node) => {\n    setHoveredNode(node);\n    setHoveredEdge(null);\n  };\n  const handleNodeMouseLeave = () => {\n    setHoveredNode(null);\n  };\n  const handleEdgeMouseEnter = (event, edge) => {\n    setHoveredEdge(edge);\n    setHoveredNode(null);\n  };\n  const handleEdgeMouseLeave = () => {\n    setHoveredEdge(null);\n  };\n  const handlePaneClick = () => {\n    setSelectedNode(null);\n    setSelectedEdge(null);\n  };\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  // Show loading screen during initial load\n  if (initialLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        background: recommendationsMode ? 'linear-gradient(135deg, #0f172a 0%, #1c1917 50%, #292524 100%)' : 'linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)',\n        color: 'white'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n        sx: {\n          color: recommendationsMode ? '#f59e0b' : '#6366f1',\n          mb: 2\n        },\n        size: 60\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        sx: {\n          mb: 1\n        },\n        children: [\"\\uD83D\\uDD17 Loading \", recommendationsMode ? 'Recommendations' : 'Standard', \" Network Data\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          color: 'rgba(255, 255, 255, 0.7)'\n        },\n        children: [\"Initializing region data for \", currentRegions.join(', '), \" using \", currentMode, \" workflow...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      height: '100vh',\n      background: recommendationsMode ? 'linear-gradient(135deg, #0f172a 0%, #1c1917 50%, #292524 100%)' // Amber-tinted background\n      : 'linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)',\n      // Standard background\n      position: 'relative',\n      transition: 'background 0.5s ease' // Smooth background transition\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flexGrow: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          flexGrow: 1,\n          position: 'relative',\n          height: '85%'\n        },\n        ref: containerRef,\n        children: [error && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            top: 80,\n            left: 16,\n            right: 16,\n            zIndex: 1000\n          },\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            sx: {\n              bgcolor: 'rgba(239, 68, 68, 0.1)',\n              color: '#ef4444',\n              border: '1px solid rgba(239, 68, 68, 0.3)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                fontWeight: 'bold',\n                mb: 0.5\n              },\n              children: recommendationsMode ? 'Recommendations System Error' : 'Network Loading Error'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this), error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), filterLoading && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            bgcolor: 'rgba(15, 23, 42, 0.7)',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            zIndex: 1000,\n            backdropFilter: 'blur(4px)'\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n              sx: {\n                color: recommendationsMode ? '#f59e0b' : '#6366f1',\n                mb: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                color: 'white'\n              },\n              children: [\"Applying \", recommendationsMode ? 'recommendations' : 'hierarchical', \" filters...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), hasData ? /*#__PURE__*/_jsxDEV(ReactFlow, {\n          nodes: nodes,\n          edges: edges,\n          nodeTypes: STABLE_NODE_TYPES,\n          edgeTypes: STABLE_EDGE_TYPES,\n          onNodesChange: onNodesChange,\n          onEdgesChange: onEdgesChange,\n          onNodeClick: handleNodeClick,\n          onEdgeClick: handleEdgeClick,\n          onNodeMouseEnter: handleNodeMouseEnter,\n          onNodeMouseLeave: handleNodeMouseLeave,\n          onEdgeMouseEnter: handleEdgeMouseEnter,\n          onEdgeMouseLeave: handleEdgeMouseLeave,\n          onPaneClick: handlePaneClick,\n          fitView: true,\n          panOnDrag: true,\n          zoomOnScroll: true,\n          proOptions: {\n            hideAttribution: true\n          },\n          onlyRenderVisibleElements: false,\n          minZoom: 0.1,\n          maxZoom: 2,\n          fitViewOptions: {\n            padding: 0.2\n          },\n          style: {\n            background: 'transparent'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Background, {\n            color: recommendationsMode ? \"rgba(245, 158, 11, 0.1)\" : \"rgba(255, 255, 255, 0.1)\",\n            gap: 16,\n            size: 1,\n            style: {\n              opacity: 0.3,\n              transition: 'color 0.3s ease'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MiniMap, {\n            pannable: true,\n            zoomable: true,\n            style: {\n              backgroundColor: 'rgba(15, 23, 42, 0.8)',\n              border: recommendationsMode ? '1px solid rgba(245, 158, 11, 0.3)' : '1px solid rgba(255, 255, 255, 0.1)',\n              borderRadius: '8px',\n              display: 'none',\n              // Hidden by default\n              transition: 'border-color 0.3s ease'\n            },\n            maskColor: \"rgba(15, 23, 42, 0.6)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Controls, {\n            showInteractive: true,\n            style: {\n              backgroundColor: 'rgba(15, 23, 42, 0.8)',\n              border: recommendationsMode ? '1px solid rgba(245, 158, 11, 0.3)' : '1px solid rgba(255, 255, 255, 0.1)',\n              borderRadius: '8px',\n              transition: 'border-color 0.3s ease'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this) :\n        /*#__PURE__*/\n        // Empty state\n        _jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n            height: '100%',\n            color: 'white'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            sx: {\n              mb: 1,\n              opacity: 0.8\n            },\n            children: \"No Data Available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              opacity: 0.6\n            },\n            children: [\"Try adjusting your \", recommendationsMode ? 'recommendations' : 'hierarchical', \" filters or check your region selection\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StatsCards, {\n          nodes: nodes,\n          edges: edges,\n          showDebug: showDebug,\n          setShowDebug: setShowDebug,\n          isDarkTheme: isDarkTheme,\n          setIsDarkTheme: setIsDarkTheme,\n          recommendationsMode: recommendationsMode,\n          setRecommendationsMode: setRecommendationsMode,\n          onModeChange: handleRecommendationsModeChange,\n          currentRegions: currentRegions,\n          nodeCount: nodeCount,\n          edgeCount: edgeCount,\n          dataSource: dataSource\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DebugDataDisplay, {\n          nodes: nodes,\n          edges: edges,\n          show: showDebug\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          height: '15%',\n          borderTop: recommendationsMode ? '1px solid rgba(245, 158, 11, 0.2)' : '1px solid rgba(255, 255, 255, 0.1)',\n          bgcolor: recommendationsMode ? 'linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(15, 23, 42, 0.95) 100%)' : 'linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(15, 23, 42, 0.95) 100%)',\n          backdropFilter: 'blur(20px)',\n          display: 'flex',\n          alignItems: 'center',\n          transition: 'all 0.3s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(InsightsPanel, {\n          selectedNode: selectedNode || hoveredNode,\n          selectedEdge: selectedEdge || hoveredEdge,\n          isHovered: !!(hoveredNode || hoveredEdge),\n          isDarkTheme: isDarkTheme\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n      variant: \"permanent\",\n      anchor: \"right\",\n      sx: {\n        width: 320,\n        '& .MuiDrawer-paper': {\n          width: 320,\n          bgcolor: 'rgba(15, 23, 42, 0.98)',\n          // FIXED: Same dark background as filter sections\n          backdropFilter: 'blur(20px)',\n          border: 'none',\n          borderLeft: '1px solid rgba(99, 102, 241, 0.2)',\n          // Purple theme\n          height: '100vh',\n          transition: 'all 0.3s ease'\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: 320,\n          height: '100%',\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexShrink: 0,\n            borderBottom: '1px solid rgba(99, 102, 241, 0.2)',\n            // Purple theme\n            bgcolor: 'rgba(15, 23, 42, 0.98)',\n            // FIXED: Same dark background as filter sections\n            transition: 'all 0.3s ease'\n          },\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            value: tabValue,\n            onChange: handleTabChange,\n            sx: {\n              minHeight: 56,\n              // Fixed height for consistent spacing\n              '& .MuiTab-root': {\n                color: 'rgba(255, 255, 255, 0.7)',\n                minHeight: 56,\n                textTransform: 'none',\n                fontWeight: 'medium',\n                '&.Mui-selected': {\n                  color: '#6366f1',\n                  // Purple for both\n                  fontWeight: 'bold'\n                }\n              },\n              '& .MuiTabs-indicator': {\n                backgroundColor: '#6366f1',\n                // Purple for both\n                transition: 'background-color 0.3s ease'\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              icon: /*#__PURE__*/_jsxDEV(ChatIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 23\n              }, this),\n              label: \"Chat\",\n              iconPosition: \"start\",\n              sx: {\n                gap: 1,\n                px: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              icon: /*#__PURE__*/_jsxDEV(FilterIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 23\n              }, this),\n              label: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 0.5\n                },\n                children: [\"Filters\", filterLoading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  size: 12,\n                  sx: {\n                    color: '#6366f1'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 23\n                }, this), recommendationsMode && /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    width: 6,\n                    height: 6,\n                    borderRadius: '50%',\n                    bgcolor: '#f59e0b'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this),\n              iconPosition: \"start\",\n              sx: {\n                gap: 1,\n                px: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 1,\n            overflow: 'hidden',\n            height: 'calc(100vh - 56px)' // Subtract tab header height\n          },\n          children: /*#__PURE__*/_jsxDEV(GraphDataProvider, {\n            value: {\n              filterOptions,\n              currentFilters,\n              currentRegions,\n              filterLoading,\n              error,\n              changeRegions,\n              applyFilters,\n              resetFilters,\n              getAvailableRegions\n            },\n            children: [tabValue === 0 && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                height: '100%',\n                overflow: 'hidden'\n              },\n              children: /*#__PURE__*/_jsxDEV(ChatInterface, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 17\n            }, this), tabValue === 1 && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                height: '100%',\n                overflow: 'hidden'\n              },\n              children: /*#__PURE__*/_jsxDEV(WorkingFiltersInterface, {\n                recommendationsMode: recommendationsMode,\n                isDarkTheme: isDarkTheme\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n}\n\n// Main wrapper component with ReactFlowProvider - UNCHANGED\n_s(GraphComponent, \"9TcRZwVV99dkGgHZktdQ2zSrsnU=\", false, function () {\n  return [useReactFlow, useGraphData, useNodesState, useEdgesState];\n});\n_c = GraphComponent;\nexport default function JPMGraphPreviewWithFilters() {\n  return /*#__PURE__*/_jsxDEV(ReactFlowProvider, {\n    children: /*#__PURE__*/_jsxDEV(GraphComponent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 569,\n    columnNumber: 5\n  }, this);\n}\n_c2 = JPMGraphPreviewWithFilters;\nvar _c, _c2;\n$RefreshReg$(_c, \"GraphComponent\");\n$RefreshReg$(_c2, \"JPMGraphPreviewWithFilters\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","ReactFlow","Background","Controls","MiniMap","useNodesState","useEdgesState","useReactFlow","ReactFlowProvider","Box","Drawer","Tabs","Tab","Typography","CircularProgress","Alert","Chat","ChatIcon","FilterList","FilterIcon","nodeTypes","edgeTypes","ChatInterface","WorkingFiltersInterface","StatsCards","InsightsPanel","DebugDataDisplay","useGraphData","GraphDataProvider","jsxDEV","_jsxDEV","STABLE_NODE_TYPES","STABLE_EDGE_TYPES","GraphComponent","_s","containerRef","fitView","selectedNode","setSelectedNode","selectedEdge","setSelectedEdge","hoveredNode","setHoveredNode","hoveredEdge","setHoveredEdge","tabValue","setTabValue","showDebug","setShowDebug","isDarkTheme","setIsDarkTheme","recommendationsMode","setRecommendationsMode","graphData","filterOptions","currentFilters","currentRegions","initialLoading","filterLoading","error","changeRegions","applyFilters","resetFilters","getAvailableRegions","hasData","nodeCount","edgeCount","switchMode","isRecommendationsMode","dataSource","currentMode","handleRecommendationsModeChange","mode","console","log","err","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","length","incumbentProducts","filter","n","type","biRecommends","e","_e$data","data","relType","timeoutId","setTimeout","padding","duration","warn","clearTimeout","_nodes$0$data","count","nodeIds","slice","map","id","Array","from","Set","Boolean","sampleNode","name","position","_edges$0$data","edgeIds","_e$data2","sampleEdge","source","target","observerCb","entries","window","requestAnimationFrame","isArray","debug","resizeObserver","ResizeObserver","current","observe","disconnect","handleNodeClick","event","node","handleEdgeClick","edge","handleNodeMouseEnter","handleNodeMouseLeave","handleEdgeMouseEnter","handleEdgeMouseLeave","handlePaneClick","handleTabChange","newValue","sx","display","flexDirection","justifyContent","alignItems","height","background","color","children","mb","size","fileName","_jsxFileName","lineNumber","columnNumber","variant","join","transition","flexGrow","ref","top","left","right","zIndex","severity","bgcolor","border","fontWeight","bottom","backdropFilter","textAlign","onNodeClick","onEdgeClick","onNodeMouseEnter","onNodeMouseLeave","onEdgeMouseEnter","onEdgeMouseLeave","onPaneClick","panOnDrag","zoomOnScroll","proOptions","hideAttribution","onlyRenderVisibleElements","minZoom","maxZoom","fitViewOptions","style","gap","opacity","pannable","zoomable","backgroundColor","borderRadius","maskColor","showInteractive","onModeChange","show","borderTop","isHovered","anchor","width","borderLeft","flexShrink","borderBottom","value","onChange","minHeight","textTransform","icon","label","iconPosition","px","overflow","_c","JPMGraphPreviewWithFilters","_c2","$RefreshReg$"],"sources":["/Users/prabhakarmudliyar/text-to-cypher-mui/frontend/src/components/JPMGraphPreviewWithFilters.tsx"],"sourcesContent":["// JPMGraphPreviewWithFilters.tsx - FIXED Chat Tab and Tab Header Background\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport ReactFlow, {\n  Background,\n  Controls,\n  MiniMap,\n  useNodesState,\n  useEdgesState,\n  useReactFlow,\n  ReactFlowProvider,\n  Node,\n  Edge,\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { Box, Drawer, Tabs, Tab, Typography, CircularProgress, Alert } from '@mui/material';\nimport { Chat as ChatIcon, FilterList as FilterIcon } from '@mui/icons-material';\n\n// Import components\nimport { nodeTypes, edgeTypes } from './components/NodeComponents';\nimport { ChatInterface } from './components/ChatInterface';\nimport { WorkingFiltersInterface } from './components/WorkingFiltersInterface';\nimport { StatsCards } from './components/StatsCards';\nimport { InsightsPanel } from './components/InsightsPanel';\nimport { DebugDataDisplay } from './components/DebugDataDisplay';\nimport { AppNodeData, EdgeData } from './types/GraphTypes';\nimport { useGraphData } from './hooks/useGraphData';\nimport { GraphDataProvider } from './context/GraphDataProvider';\n\n// Move nodeTypes and edgeTypes outside component to prevent recreation\nconst STABLE_NODE_TYPES = nodeTypes;\nconst STABLE_EDGE_TYPES = edgeTypes;\n\n// Inner component that uses ReactFlow hooks\nfunction GraphComponent() {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const { fitView } = useReactFlow();\n  const [selectedNode, setSelectedNode] = useState<Node<AppNodeData> | null>(null);\n  const [selectedEdge, setSelectedEdge] = useState<Edge<EdgeData> | null>(null);\n  const [hoveredNode, setHoveredNode] = useState<Node<AppNodeData> | null>(null);\n  const [hoveredEdge, setHoveredEdge] = useState<Edge<EdgeData> | null>(null);\n  const [tabValue, setTabValue] = useState(1); // Start with filters tab\n  const [showDebug, setShowDebug] = useState(false); // Debug toggle state\n  const [isDarkTheme, setIsDarkTheme] = useState(true); // Theme toggle state\n  \n  // üÜï NEW: Local recommendations mode state\n  const [recommendationsMode, setRecommendationsMode] = useState(false);\n\n  // üéØ USE ENHANCED useGraphData HOOK\n  const { \n    graphData,           // Already contains transformed nodes/edges\n    filterOptions,\n    currentFilters,\n    currentRegions,\n    initialLoading, \n    filterLoading, \n    error,\n    changeRegions,       // Already handles hierarchical region changes\n    applyFilters,        // Already handles hierarchical filtering\n    resetFilters,\n    getAvailableRegions,\n    hasData,\n    nodeCount,\n    edgeCount,\n    // üÜï NEW: Recommendations mode methods\n    switchMode,          // Switch between standard/recommendations\n    isRecommendationsMode, // Detect current mode\n    dataSource,          // Track data source\n    currentMode          // Current mode string\n  } = useGraphData();\n\n  // üÜï NEW: Sync local state with hook's mode detection\n  useEffect(() => {\n    setRecommendationsMode(isRecommendationsMode);\n  }, [isRecommendationsMode]);\n\n  // üÜï NEW: Handle recommendations mode changes\n  const handleRecommendationsModeChange = useCallback(async (mode: 'standard' | 'recommendations') => {\n    console.log(`üéØ Switching to ${mode} mode`);\n    setRecommendationsMode(mode === 'recommendations');\n    \n    // üéØ USE HOOK'S switchMode method\n    try {\n      await switchMode(mode, currentRegions);\n      console.log(`‚úÖ Successfully switched to ${mode} mode`);\n    } catch (err) {\n      console.error(`‚ùå Failed to switch to ${mode} mode:`, err);\n    }\n  }, [currentRegions, switchMode]);\n\n  // üéØ USE graphData directly from hook (no need for local state)\n  const [nodes, setNodes, onNodesChange] = useNodesState<AppNodeData>([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n\n  // Update ReactFlow when graphData changes (from hook)\n  useEffect(() => {\n    console.log('üîÑ GraphData from hook changed:', {\n      nodes: graphData.nodes.length,\n      edges: graphData.edges.length,\n      incumbentProducts: graphData.nodes.filter(n => n.type === 'INCUMBENT_PRODUCT').length,\n      biRecommends: graphData.edges.filter(e => e.data?.relType === 'BI_RECOMMENDS').length,\n      mode: currentMode,\n      recommendationsMode\n    });\n    \n    if (graphData.nodes.length === 0) {\n      setNodes([]);\n      setEdges([]);\n      return;\n    }\n    \n    // Hook already provides layouted data, so use it directly\n    setNodes(graphData.nodes);\n    setEdges(graphData.edges);\n    \n    // Apply fitView\n    const timeoutId = setTimeout(() => {\n      try {\n        fitView({ padding: 0.2, duration: 500 });\n        console.log('‚úÖ FitView applied');\n      } catch (error) {\n        console.warn('‚ö†Ô∏è FitView failed:', error);\n      }\n    }, 150);\n    \n    return () => clearTimeout(timeoutId);\n  }, [graphData, setNodes, setEdges, fitView, currentMode, recommendationsMode]);\n\n  // Debug: Log ReactFlow state changes - FIXED Set iteration\n  useEffect(() => {\n    console.log('üîç ReactFlow nodes state changed:', {\n      count: nodes.length,\n      nodeIds: nodes.slice(0, 5).map(n => n.id),\n      nodeTypes: Array.from(new Set(nodes.map(n => n.type).filter(Boolean))), // FIXED\n      sampleNode: nodes[0] ? {\n        id: nodes[0].id,\n        type: nodes[0].type,\n        name: nodes[0].data?.name,\n        position: nodes[0].position\n      } : null\n    });\n  }, [nodes]);\n\n  useEffect(() => {\n    console.log('üîç ReactFlow edges state changed:', {\n      count: edges.length,\n      edgeIds: edges.slice(0, 5).map(e => e.id),\n      edgeTypes: Array.from(new Set(edges.map(e => e.data?.relType).filter(Boolean))), // FIXED\n      sampleEdge: edges[0] ? {\n        id: edges[0].id,\n        source: edges[0].source,\n        target: edges[0].target,\n        type: edges[0].type,\n        relType: edges[0].data?.relType\n      } : null\n    });\n  }, [edges]);\n\n  // FIXED: ResizeObserver with proper error handling\n  useEffect(() => {\n    const observerCb: ResizeObserverCallback = (entries) => {\n      try {\n        window.requestAnimationFrame(() => {\n          if (!Array.isArray(entries) || !entries.length) return;\n          // Process resize entries if needed\n          // For now, we just ensure the callback doesn't throw errors\n        });\n      } catch (error) {\n        // Silently catch ResizeObserver errors to prevent console spam\n        console.debug('ResizeObserver callback error (safely ignored):', error);\n      }\n    };\n\n    let resizeObserver: ResizeObserver | null = null;\n    \n    try {\n      resizeObserver = new ResizeObserver(observerCb);\n      if (containerRef.current) {\n        resizeObserver.observe(containerRef.current);\n      }\n    } catch (error) {\n      console.warn('Failed to create ResizeObserver:', error);\n    }\n\n    return () => {\n      try {\n        if (resizeObserver) {\n          resizeObserver.disconnect();\n        }\n      } catch (error) {\n        console.debug('ResizeObserver disconnect error (safely ignored):', error);\n      }\n    };\n  }, []);\n\n  const handleNodeClick = (event: React.MouseEvent, node: Node<AppNodeData>) => {\n    setSelectedNode(node);\n    setSelectedEdge(null);\n  };\n\n  const handleEdgeClick = (event: React.MouseEvent, edge: Edge<EdgeData>) => {\n    setSelectedEdge(edge);\n    setSelectedNode(null);\n  };\n\n  const handleNodeMouseEnter = (event: React.MouseEvent, node: Node<AppNodeData>) => {\n    setHoveredNode(node);\n    setHoveredEdge(null);\n  };\n\n  const handleNodeMouseLeave = () => {\n    setHoveredNode(null);\n  };\n\n  const handleEdgeMouseEnter = (event: React.MouseEvent, edge: Edge<EdgeData>) => {\n    setHoveredEdge(edge);\n    setHoveredNode(null);\n  };\n\n  const handleEdgeMouseLeave = () => {\n    setHoveredEdge(null);\n  };\n\n  const handlePaneClick = () => {\n    setSelectedNode(null);\n    setSelectedEdge(null);\n  };\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n  };\n\n  // Show loading screen during initial load\n  if (initialLoading) {\n    return (\n      <Box sx={{ \n        display: 'flex', \n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh', \n        background: recommendationsMode \n          ? 'linear-gradient(135deg, #0f172a 0%, #1c1917 50%, #292524 100%)'\n          : 'linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)',\n        color: 'white'\n      }}>\n        <CircularProgress sx={{ color: recommendationsMode ? '#f59e0b' : '#6366f1', mb: 2 }} size={60} />\n        <Typography variant=\"h6\" sx={{ mb: 1 }}>\n          üîó Loading {recommendationsMode ? 'Recommendations' : 'Standard'} Network Data\n        </Typography>\n        <Typography variant=\"body2\" sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n          Initializing region data for {currentRegions.join(', ')} using {currentMode} workflow...\n        </Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ \n      display: 'flex', \n      height: '100vh', \n      background: recommendationsMode \n        ? 'linear-gradient(135deg, #0f172a 0%, #1c1917 50%, #292524 100%)' // Amber-tinted background\n        : 'linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)', // Standard background\n      position: 'relative',\n      transition: 'background 0.5s ease' // Smooth background transition\n    }}>\n      {/* Main Graph Section */}\n      <Box sx={{ \n        flexGrow: 1, \n        display: 'flex', \n        flexDirection: 'column',\n        height: '100vh'\n      }}>\n        {/* Graph Canvas - 90% of graph section */}\n        <Box sx={{ \n          flexGrow: 1, \n          position: 'relative', \n          height: '85%' \n        }} ref={containerRef}>\n          \n          {/* Error State */}\n          {error && (\n            <Box sx={{ \n              position: 'absolute', \n              top: 80, \n              left: 16, \n              right: 16, \n              zIndex: 1000 \n            }}>\n              <Alert severity=\"error\" sx={{ \n                bgcolor: 'rgba(239, 68, 68, 0.1)', \n                color: '#ef4444',\n                border: '1px solid rgba(239, 68, 68, 0.3)'\n              }}>\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 'bold', mb: 0.5 }}>\n                  {recommendationsMode ? 'Recommendations System Error' : 'Network Loading Error'}\n                </Typography>\n                {error}\n              </Alert>\n            </Box>\n          )}\n\n          {/* Loading Overlay */}\n          {filterLoading && (\n            <Box sx={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              bgcolor: 'rgba(15, 23, 42, 0.7)',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              zIndex: 1000,\n              backdropFilter: 'blur(4px)'\n            }}>\n              <Box sx={{ textAlign: 'center' }}>\n                <CircularProgress sx={{ color: recommendationsMode ? '#f59e0b' : '#6366f1', mb: 2 }} />\n                <Typography sx={{ color: 'white' }}>\n                  Applying {recommendationsMode ? 'recommendations' : 'hierarchical'} filters...\n                </Typography>\n              </Box>\n            </Box>\n          )}\n\n          {/* ReactFlow Graph */}\n          {hasData ? (\n            <ReactFlow\n              nodes={nodes}\n              edges={edges}\n              nodeTypes={STABLE_NODE_TYPES}\n              edgeTypes={STABLE_EDGE_TYPES}\n              onNodesChange={onNodesChange}\n              onEdgesChange={onEdgesChange}\n              onNodeClick={handleNodeClick}\n              onEdgeClick={handleEdgeClick}\n              onNodeMouseEnter={handleNodeMouseEnter}\n              onNodeMouseLeave={handleNodeMouseLeave}\n              onEdgeMouseEnter={handleEdgeMouseEnter}\n              onEdgeMouseLeave={handleEdgeMouseLeave}\n              onPaneClick={handlePaneClick}\n              fitView\n              panOnDrag\n              zoomOnScroll\n              proOptions={{ hideAttribution: true }}\n              onlyRenderVisibleElements={false}\n              minZoom={0.1}\n              maxZoom={2}\n              fitViewOptions={{ padding: 0.2 }}\n              style={{ background: 'transparent' }}\n            >\n              <Background \n                color={recommendationsMode ? \"rgba(245, 158, 11, 0.1)\" : \"rgba(255, 255, 255, 0.1)\"} \n                gap={16} \n                size={1}\n                style={{ opacity: 0.3, transition: 'color 0.3s ease' }}\n              />\n              <MiniMap \n                pannable \n                zoomable \n                style={{\n                  backgroundColor: 'rgba(15, 23, 42, 0.8)',\n                  border: recommendationsMode ? '1px solid rgba(245, 158, 11, 0.3)' : '1px solid rgba(255, 255, 255, 0.1)',\n                  borderRadius: '8px',\n                  display: 'none', // Hidden by default\n                  transition: 'border-color 0.3s ease'\n                }}\n                maskColor=\"rgba(15, 23, 42, 0.6)\"\n              />\n              <Controls \n                showInteractive \n                style={{\n                  backgroundColor: 'rgba(15, 23, 42, 0.8)',\n                  border: recommendationsMode ? '1px solid rgba(245, 158, 11, 0.3)' : '1px solid rgba(255, 255, 255, 0.1)',\n                  borderRadius: '8px',\n                  transition: 'border-color 0.3s ease'\n                }}\n              />\n            </ReactFlow>\n          ) : (\n            // Empty state\n            <Box sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center',\n              alignItems: 'center',\n              height: '100%',\n              color: 'white'\n            }}>\n              <Typography variant=\"h6\" sx={{ mb: 1, opacity: 0.8 }}>\n                No Data Available\n              </Typography>\n              <Typography variant=\"body2\" sx={{ opacity: 0.6 }}>\n                Try adjusting your {recommendationsMode ? 'recommendations' : 'hierarchical'} filters or check your region selection\n              </Typography>\n            </Box>\n          )}\n\n          {/* üÜï UPDATED: Floating Stats Cards with Recommendations Support */}\n          <StatsCards \n            nodes={nodes} \n            edges={edges} \n            showDebug={showDebug}\n            setShowDebug={setShowDebug}\n            isDarkTheme={isDarkTheme}\n            setIsDarkTheme={setIsDarkTheme}\n            recommendationsMode={recommendationsMode}\n            setRecommendationsMode={setRecommendationsMode}\n            onModeChange={handleRecommendationsModeChange}\n            currentRegions={currentRegions}\n            nodeCount={nodeCount}\n            edgeCount={edgeCount}\n            dataSource={dataSource}\n          />\n          \n          {/* Debug Data Display */}\n          <DebugDataDisplay nodes={nodes} edges={edges} show={showDebug} />\n          \n          {/* REMOVED: Status bar moved to StatsCards */}\n        </Box>\n\n        {/* Bottom Insights Panel - 10% of graph section */}\n        <Box sx={{ \n          height: '15%', \n          borderTop: recommendationsMode ? '1px solid rgba(245, 158, 11, 0.2)' : '1px solid rgba(255, 255, 255, 0.1)',\n          bgcolor: recommendationsMode \n            ? 'linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(15, 23, 42, 0.95) 100%)'\n            : 'linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(15, 23, 42, 0.95) 100%)',\n          backdropFilter: 'blur(20px)',\n          display: 'flex',\n          alignItems: 'center',\n          transition: 'all 0.3s ease'\n        }}>\n          <InsightsPanel \n            selectedNode={selectedNode || hoveredNode}\n            selectedEdge={selectedEdge || hoveredEdge}\n            isHovered={!!(hoveredNode || hoveredEdge)}\n            isDarkTheme={isDarkTheme}\n          />\n        </Box>\n      </Box>\n\n      {/* Right Panel - Filters and Chat */}\n      <Drawer \n        variant=\"permanent\" \n        anchor=\"right\" \n        sx={{ \n          width: 320,\n          '& .MuiDrawer-paper': {\n            width: 320,\n            bgcolor: 'rgba(15, 23, 42, 0.98)', // FIXED: Same dark background as filter sections\n            backdropFilter: 'blur(20px)',\n            border: 'none',\n            borderLeft: '1px solid rgba(99, 102, 241, 0.2)', // Purple theme\n            height: '100vh',\n            transition: 'all 0.3s ease'\n          }\n        }}\n      >\n        <Box sx={{ width: 320, height: '100%', display: 'flex', flexDirection: 'column' }}>\n          {/* Tab header with FIXED background color */}\n          <Box sx={{ \n            flexShrink: 0,\n            borderBottom: '1px solid rgba(99, 102, 241, 0.2)', // Purple theme\n            bgcolor: 'rgba(15, 23, 42, 0.98)', // FIXED: Same dark background as filter sections\n            transition: 'all 0.3s ease'\n          }}>\n            <Tabs \n              value={tabValue} \n              onChange={handleTabChange}\n              sx={{ \n                minHeight: 56, // Fixed height for consistent spacing\n                '& .MuiTab-root': { \n                  color: 'rgba(255, 255, 255, 0.7)',\n                  minHeight: 56,\n                  textTransform: 'none',\n                  fontWeight: 'medium',\n                  '&.Mui-selected': { \n                    color: '#6366f1', // Purple for both\n                    fontWeight: 'bold'\n                  }\n                },\n                '& .MuiTabs-indicator': { \n                  backgroundColor: '#6366f1', // Purple for both\n                  transition: 'background-color 0.3s ease'\n                }\n              }}\n            >\n              <Tab \n                icon={<ChatIcon />} \n                label=\"Chat\" \n                iconPosition=\"start\"\n                sx={{ \n                  gap: 1,\n                  px: 2\n                }}\n              />\n              <Tab \n                icon={<FilterIcon />} \n                label={\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                     Filters\n                    {filterLoading && (\n                      <CircularProgress size={12} sx={{ color: '#6366f1' }} />\n                    )}\n                    {/* Show mode indicator */}\n                    {recommendationsMode && (\n                      <Box sx={{\n                        width: 6,\n                        height: 6,\n                        borderRadius: '50%',\n                        bgcolor: '#f59e0b'\n                      }} />\n                    )}\n                  </Box>\n                }\n                iconPosition=\"start\"\n                sx={{ \n                  gap: 1,\n                  px: 2\n                }}\n              />\n            </Tabs>\n          </Box>\n          \n          {/* Tab content with proper height calculation */}\n          <Box sx={{ \n            flexGrow: 1, \n            overflow: 'hidden',\n            height: 'calc(100vh - 56px)' // Subtract tab header height\n          }}>\n            <GraphDataProvider value={{\n              filterOptions,\n              currentFilters,\n              currentRegions,\n              filterLoading,\n              error,\n              changeRegions,\n              applyFilters,\n              resetFilters,\n              getAvailableRegions\n            }}>\n              {tabValue === 0 && (\n                <Box sx={{ height: '100%', overflow: 'hidden' }}>\n                  <ChatInterface />\n                </Box>\n              )}\n              {tabValue === 1 && (\n                <Box sx={{ height: '100%', overflow: 'hidden' }}>\n                  {/* üÜï UPDATED: Pass recommendations mode to WorkingFiltersInterface */}\n                  <WorkingFiltersInterface \n                    recommendationsMode={recommendationsMode} \n                    isDarkTheme={isDarkTheme}\n                  />\n                </Box>\n              )}\n            </GraphDataProvider>\n          </Box>\n        </Box>\n      </Drawer>\n    </Box>\n  );\n}\n\n// Main wrapper component with ReactFlowProvider - UNCHANGED\nexport default function JPMGraphPreviewWithFilters() {\n  return (\n    <ReactFlowProvider>\n      <GraphComponent />\n    </ReactFlowProvider>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}